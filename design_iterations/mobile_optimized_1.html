<!DOCTYPE html>
<html lang="en" x-data="{ 
    darkMode: true,
    sidebarOpen: false,
    composeOpen: false,
    activeTab: 'inbox',
    swiping: null,
    swipeOffset: 0,
    startX: 0
}" :class="{ 'dark': darkMode, 'light': !darkMode }">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Secretary Mobile</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="theme_1.css">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: 'oklch(65% 0.2 260)',
                    }
                }
            }
        }
    </script>
    <style>
        [x-cloak] { display: none !important; }
        body { 
            background-color: var(--bg-main); 
            color: var(--text-primary);
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            overscroll-behavior-y: contain;
        }
        .safe-area-pb { padding-bottom: var(--safe-area-bottom); }
    </style>
</head>
<body class="min-h-screen flex flex-col overflow-hidden">
    <div x-show="sidebarOpen" 
         x-transition:enter="transition ease-out duration-300"
         x-transition:enter-start="opacity-0"
         x-transition:enter-end="opacity-100"
         x-transition:leave="transition ease-in duration-200"
         x-transition:leave-start="opacity-100"
         x-transition:leave-end="opacity-0"
         class="fixed inset-0 z-40 bg-black/60 backdrop-blur-sm"
         @click="sidebarOpen = false" x-cloak></div>

    <aside x-show="sidebarOpen"
           x-transition:enter="transition ease-out duration-300 transform"
           x-transition:enter-start="-translate-x-full"
           x-transition:enter-end="translate-x-0"
           x-transition:leave="transition ease-in duration-200 transform"
           x-transition:leave-start="translate-x-0"
           x-transition:leave-end="-translate-x-full"
           class="fixed inset-y-0 left-0 z-50 w-64 bg-zinc-900 border-r border-zinc-800 p-6 flex flex-col" x-cloak>
        <div class="flex items-center justify-between mb-8">
            <h2 class="text-xl font-bold flex items-center gap-2">
                <i data-lucide="mail" class="text-blue-500"></i>
                Secretary
            </h2>
            <button @click="sidebarOpen = false" class="p-2 text-zinc-400">
                <i data-lucide="x" class="w-5 h-5"></i>
            </button>
        </div>

        <nav class="space-y-1">
            <a href="#" class="flex items-center gap-3 px-3 py-2 bg-blue-500/10 text-blue-400 rounded-lg">
                <i data-lucide="inbox" class="w-5 h-5"></i>
                Inbox
            </a>
            <a href="#" class="flex items-center gap-3 px-3 py-2 text-zinc-400 hover:bg-zinc-800 rounded-lg">
                <i data-lucide="star" class="w-5 h-5"></i>
                Priority
            </a>
            <a href="#" class="flex items-center gap-3 px-3 py-2 text-zinc-400 hover:bg-zinc-800 rounded-lg">
                <i data-lucide="archive" class="w-5 h-5"></i>
                Archive
            </a>
            <a href="#" class="flex items-center gap-3 px-3 py-2 text-zinc-400 hover:bg-zinc-800 rounded-lg">
                <i data-lucide="trash-2" class="w-5 h-5"></i>
                Trash
            </a>
        </nav>

        <div class="mt-8">
            <h3 class="px-3 text-xs font-semibold text-zinc-500 uppercase tracking-wider mb-2">Labels</h3>
            <div class="space-y-1 text-sm">
                <a href="#" class="flex items-center gap-3 px-3 py-2 text-zinc-400">
                    <span class="w-2 h-2 rounded-full bg-blue-500"></span> Work
                </a>
                <a href="#" class="flex items-center gap-3 px-3 py-2 text-zinc-400">
                    <span class="w-2 h-2 rounded-full bg-green-500"></span> Project Alpha
                </a>
            </div>
        </div>
    </aside>

    <header class="flex items-center justify-between px-4 h-14 border-b border-zinc-800 bg-zinc-900/50 backdrop-blur-md shrink-0">
        <button @click="sidebarOpen = true" class="p-2 -ml-2 text-zinc-400">
            <i data-lucide="menu" class="w-6 h-6"></i>
        </button>
        <h1 class="font-semibold">Inbox</h1>
        <button class="p-2 -mr-2 text-zinc-400">
            <i data-lucide="search" class="w-6 h-6"></i>
        </button>
    </header>

    <main class="flex-1 overflow-y-auto bg-zinc-950">
        <div class="divide-y divide-zinc-800">
            <template x-for="i in [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]" :key="i">
                <div class="swipe-row-container" 
                     @touchstart="startX = $event.touches[0].clientX; swiping = i"
                     @touchmove="swipeOffset = $event.touches[0].clientX - startX"
                     @touchend="if (Math.abs(swipeOffset) > 100) { /* handle swipe completion */ } swipeOffset = 0; swiping = null">
                    
                    <div class="swipe-action-left" :style="{ opacity: swipeOffset > 0 ? 1 : 0 }">
                        <i data-lucide="archive" class="w-6 h-6"></i>
                    </div>
                    <div class="swipe-action-right" :style="{ opacity: swipeOffset < 0 ? 1 : 0 }">
                        <i data-lucide="trash-2" class="w-6 h-6"></i>
                    </div>

                    <div class="swipe-row-content p-4 flex gap-4"
                         :style="{ transform: swiping === i ? `translateX(${swipeOffset}px)` : 'translateX(0px)' }">
                        <div class="w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center shrink-0">
                            <span class="text-white font-bold" x-text="['JD', 'GH', 'CP', 'DD'][i % 4]"></span>
                        </div>
                        <div class="flex-1 min-w-0">
                            <div class="flex justify-between items-start mb-0.5">
                                <span class="font-bold text-zinc-100 truncate" x-text="['Jane Doe', 'GitHub', 'CEO Priority', 'Daily Digest'][i % 4]"></span>
                                <span class="text-xs text-zinc-500 whitespace-nowrap">10:45 AM</span>
                            </div>
                            <h2 class="text-sm font-semibold text-zinc-300 truncate mb-1">Update on Project Q4 Timeline and Budget Review</h2>
                            <p class="text-sm text-zinc-500 line-clamp-2">Hi Team, following up on our discussion yesterday regarding the budget constraints we've identified in the recent audit...</p>
                        </div>
                    </div>
                </div>
            </template>
        </div>
    </main>

    <nav class="h-16 border-t border-zinc-800 bg-zinc-900/80 backdrop-blur-md safe-area-pb flex shrink-0">
        <button @click="activeTab = 'inbox'" class="nav-bottom-item" :class="{ 'active': activeTab === 'inbox' }">
            <i data-lucide="inbox" class="w-6 h-6"></i>
            <span class="text-[10px] mt-1">Inbox</span>
        </button>
        <button @click="activeTab = 'folders'" class="nav-bottom-item" :class="{ 'active': activeTab === 'folders' }">
            <i data-lucide="folder" class="w-6 h-6"></i>
            <span class="text-[10px] mt-1">Folders</span>
        </button>
        <div class="flex-1 flex items-center justify-center -mt-6">
            <button @click="composeOpen = true" class="w-14 h-14 bg-blue-600 rounded-full shadow-lg shadow-blue-500/40 flex items-center justify-center text-white ring-4 ring-zinc-950">
                <i data-lucide="plus" class="w-8 h-8"></i>
            </button>
        </div>
        <button @click="activeTab = 'ai'" class="nav-bottom-item" :class="{ 'active': activeTab === 'ai' }">
            <i data-lucide="cpu" class="w-6 h-6"></i>
            <span class="text-[10px] mt-1">AI Agent</span>
        </button>
        <button @click="activeTab = 'settings'" class="nav-bottom-item" :class="{ 'active': activeTab === 'settings' }">
            <i data-lucide="settings" class="w-6 h-6"></i>
            <span class="text-[10px] mt-1">Settings</span>
        </button>
    </nav>

    <div x-show="composeOpen"
         x-transition:enter="transition ease-out duration-400 transform"
         x-transition:enter-start="translate-y-full"
         x-transition:enter-end="translate-y-0"
         x-transition:leave="transition ease-in duration-300 transform"
         x-transition:leave-start="translate-y-0"
         x-transition:leave-end="translate-y-full"
         class="fixed inset-0 z-[60] bg-zinc-950 flex flex-col" x-cloak>
        
        <header class="flex items-center justify-between px-4 h-14 border-b border-zinc-800 shrink-0">
            <button @click="composeOpen = false" class="p-2 -ml-2 text-zinc-400">
                <i data-lucide="x" class="w-6 h-6"></i>
            </button>
            <h2 class="font-bold">New Message</h2>
            <button @click="composeOpen = false" class="text-blue-500 font-bold px-4 py-2">
                Send
            </button>
        </header>

        <div class="p-4 space-y-4 flex-1">
            <div class="flex items-center border-b border-zinc-800 py-2">
                <span class="text-zinc-500 w-12 text-sm">To:</span>
                <input type="text" class="flex-1 bg-transparent outline-none text-sm" placeholder="Recipients">
            </div>
            <div class="flex items-center border-b border-zinc-800 py-2">
                <span class="text-zinc-500 w-12 text-sm">Sub:</span>
                <input type="text" class="flex-1 bg-transparent outline-none text-sm" placeholder="Subject">
            </div>
            <textarea class="w-full h-full bg-transparent outline-none text-base resize-none mt-4" placeholder="Type your message..."></textarea>
        </div>

        <div class="px-4 py-3 bg-zinc-900 border-t border-zinc-800 safe-area-pb flex items-center justify-between">
            <div class="flex gap-4">
                <button class="text-zinc-400 hover:text-white"><i data-lucide="image" class="w-6 h-6"></i></button>
                <button class="text-zinc-400 hover:text-white"><i data-lucide="paperclip" class="w-6 h-6"></i></button>
                <button class="text-zinc-400 hover:text-white"><i data-lucide="mic" class="w-6 h-6"></i></button>
            </div>
            <button class="flex items-center gap-2 px-4 py-1.5 bg-blue-500/20 text-blue-400 rounded-full text-sm font-medium border border-blue-500/30">
                <i data-lucide="sparkles" class="w-4 h-4"></i>
                AI Assist
            </button>
        </div>
    </div>

    <script>
        lucide.createIcons();
    </script>
</body>
</html>
